<!DOCTYPE html>
<html>

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <title>Expected Conditions Playground!</title>
</head>



<body>
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
        <!-- Brand/logo -->
        <a class="navbar-brand" href="#">Expected Conditions Playground</a>
        <form class="form-inline">
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text">Min. Wait</span>
                </div>
                <input type="number" class="form-control" placeholder="Min. Wait" id="min_wait" value="3">
                <div class="input-group-append">
                    <span class="input-group-text">seconds</span>
                </div>
            </div>
            <pre>  </pre>
            <div class="input-group">
                <div class="input-group-prepend">
                    <span class="input-group-text">Max. Wait</span>
                </div>
                <input type="number" class="form-control" placeholder="Max. Wait" id="max_wait" value="8">
                <div class="input-group-append">
                    <span class="input-group-text">seconds</span>
                </div>
            </div>
        </form>
    </nav>

    <br><br><br><br><br><br>

    <div class="container align-items-center text-center">

        <!-- Wait for alert to be present -->
        <div class="row  border border-secondary  align-items-center text-center">
            <div class="col-sm-12 bg-secondary text-light">
                <h4>Wait for alert to be present</h4>
            </div>
        </div>
        <div class="row  border border-secondary  align-items-center text-center">
            <div class="col-sm-12 text-left">
                <pre>Expected Conditions: 
                        alertIsPresent()</pre>
            </div>
        </div>
        <div class="row  border border-secondary align-items-center text-center">
            <div class="col-sm-4">
                <p>Test the JavaScript <strong>alert</strong> and <strong>prompt</strong></p>
                <button type="button" class="btn btn-primary" id="alert_trigger">Show Alert</button>
                <button type="button" class="btn btn-primary" id="prompt_trigger">Show Prompt</button>
                <p></p>
            </div>
            <div class="col-sm-8">
                <h4 style="display: none" id="confirm_ok">Confirm response: <span class="badge badge-success">OK</span></h4>
                <h4 style="display: none" id="confirm_cancelled">Confirm response: <span class="badge badge-danger">Cancelled</span></h4>
                <h4 style="display: none" id="alert_handled"><span class="badge badge-success">Alert handled</span></h4>
            </div>
        </div>

        <br><br>

        <!-- Wait for element to be visible -->
        <div class="row  border border-secondary  align-items-center text-center">
            <div class="col-sm-12 bg-secondary text-light">
                <h4>Wait for element to be visible</h4>
            </div>
        </div>
        <div class="row  border border-secondary  align-items-center text-center">
            <div class="col-sm-12 text-left">
                <pre>Expected Conditions: 
                        visibilityOf(WebElement element)
                        visibilityOfElementLocated(By locator)
                        elementToBeClickable(WebElement element)</pre>
            </div>
        </div>
        <div class="row  border border-secondary align-items-center text-center">
            <div class="col-sm-4">
                <p>Click the <strong>Trigger</strong> and an invisible button will be visible!</p>
                <button type="button" class="btn btn-primary" id="visibility_trigger">Trigger</button>
                <p></p>
            </div>
            <div class="col-sm-8">
                <p>A clickable button will appear here after <strong>Trigger</strong> button is clicked.</p>
                <button type="button" class="btn btn-danger" id="visibility_target" style="display: none" data-toggle="popover" title="Can you see me?" data-content="I just removed my invisibility cloak!!">Click Me</button>
            </div>
        </div>

        <br><br>

        <!-- Wait for element to be invisible -->
        <div class="row  border border-secondary  align-items-center text-center">
            <div class="col-sm-12 bg-secondary text-light">
                <h4>Wait for element to be Invisible</h4>
            </div>
        </div>
        <div class="row  border border-secondary  align-items-center text-center">
            <div class="col-sm-12 text-left">
                <pre>Expected Conditions: 
                        invisibilityOf(WebElement element)
                        invisibilityOfElementLocated(By locator)
                        invisibilityOfElementWithText(By locator, java.lang.String text)</pre>
            </div>
        </div>
        <div class="row  border border-secondary align-items-center text-center">
            <div class="col-sm-4">
                <p>Click the <strong>Trigger</strong> and the spinner will disappear!</p>
                <button type="button" class="btn btn-primary" id="invisibility_trigger">Trigger</button>
                <p></p>
            </div>
            <div class="col-sm-8">
                <p>This spinner will disappear after <strong>Trigger</strong> button is clicked.</p>
                <div class="spinner-border text-primary" role="status" id="invisibility_target">
                    <span class="sr-only">Loading...</span>
                </div>
                <p style="display: none" id="spinner_gone">Thank God that spinner is gone!</p>
            </div>
        </div>

        <br><br>

        <!--Wait for element to be enabled-->
        <div class="row  border border-secondary align-items-center text-center">
            <div class="col-sm-12 bg-secondary text-light">
                <h4>Wait for element to be enabled / Wait for an attribute to contain certain text</h4>
            </div>
        </div>
        <div class="row  border border-secondary  align-items-center text-center">
            <div class="col-sm-12 text-left">
                <pre>Expected Conditions: 
                        attributeContains(By locator, java.lang.String attribute, java.lang.String value)
                        attributeContains(WebElement element, java.lang.String attribute, java.lang.String value)
                        attributeToBe(By locator, java.lang.String attribute, java.lang.String value)
                        attributeToBe(WebElement element, java.lang.String attribute, java.lang.String value)
                        elementToBeClickable(By locator)
                        elementToBeClickable(WebElement element)</pre>
            </div>
        </div>
        <div class="row  border border-secondary align-items-center text-center">
            <div class="col-sm-4">
                <p>Click the <strong>Trigger</strong> and the <strong>Disabled Button</strong> will become active.</p>
                <button type="button" class="btn btn-primary" id="enabled_trigger">Trigger</button>
                <p></p>
            </div>
            <div class="col-sm-8">
                <p class="text-left">After the <strong>Trigger</strong> button is clicked, this button will be active <br>and the <em>class</em> attribute will be <em>"btn btn-success"</em>.
                </p>
                <button type="button" class="btn btn-danger" id="enabled_target" data-toggle="popover" title="Yay! I am super active now!" data-content="See, you just clicked me!!" disabled>Disabled
                    Button</button>
                <p></p>
            </div>
        </div>

        <br><br>

        <!-- Wait for Page Title to change -->
        <div class="row  border border-secondary align-items-center text-center">
            <div class="col-sm-12 bg-secondary text-light">
                <h4>Wait for Page Title to change</h4>
            </div>
        </div>
        <div class="row  border border-secondary  align-items-center text-center">
            <div class="col-sm-12 text-left">
                <pre>Expected Conditions: 
                        titleContains(java.lang.String title)
                        titleIs(java.lang.String title)</pre>
            </div>
        </div>
        <div class="row  border border-secondary align-items-center text-center">
            <div class="col-sm-4">
                <p>Click the <strong>Trigger</strong> and the Page Title will change to "My New Title!"</p>
                <button type="button" class="btn btn-primary" id="page_title_trigger">Trigger</button>
                <p></p>
            </div>
            <div class="col-sm-8">

            </div>
        </div>

        <br><br>

        <!-- Wait for text/value to have specific values -->
        <div class="row  border border-secondary  align-items-center text-center">
            <div class="col-sm-12 bg-secondary text-light">
                <h4>Wait for text/value to have specific values</h4>
            </div>
        </div>
        <div class="row  border border-secondary  align-items-center text-center">
            <div class="col-sm-12 text-left">
                <pre>Expected Conditions: 
                        textMatches(By locator, java.util.regex.Pattern pattern)
                        textToBe(By locator, java.lang.String value)
                        textToBePresentInElement(WebElement element, java.lang.String text)
                        textToBePresentInElementLocated(By locator, java.lang.String text)
                        textToBePresentInElementValue(By locator, java.lang.String text)
                        textToBePresentInElementValue(WebElement element, java.lang.String text)</pre>

            </div>
        </div>
        <div class="row  border border-secondary align-items-center text-center">
            <div class="col-sm-4">
                <p>Click the <strong>Trigger</strong> to enter text in the textbox and change the button caption</p>
                <button type="button" class="btn btn-primary" id="text_value_trigger">Trigger</button>
                <p></p>
            </div>
            <div class="col-sm-8 align-items-center">
                <form class="form-inline">
                    <input type="text" class="form-control" placeholder="Creator of C" id="wait_for_value">
                    <button class="btn btn-success" type="button" id="wait_for_text">
                        <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>
                        <span class="sr-only">Loading...</span>
                    </button>
                </form>
            </div>
        </div>

        <br><br>

        <!-- Wait for frame to be available and then switch to it -->
        <div class="row  border border-secondary  align-items-center text-center">
            <div class="col-sm-12 bg-secondary text-light">
                <h4>Wait for frame to be available and then switch to it</h4>
            </div>
        </div>
        <div class="row  border border-secondary  align-items-center text-center">
                <div class="col-sm-12 text-left">
                    <pre>Expected Conditions: 
                    frameToBeAvailableAndSwitchToIt(By locator)
                    frameToBeAvailableAndSwitchToIt(int frameLocator)
                    frameToBeAvailableAndSwitchToIt(java.lang.String frameLocator)
                    frameToBeAvailableAndSwitchToIt(WebElement frameLocator)</pre>
                </div>
        </div>
        <div class="row  border border-secondary align-items-center text-center">
            <div class="col-sm-4">
                <p>Click the <strong>Trigger</strong> and a frame will appear after a few seconds</p>
                <button type="button" class="btn btn-primary" id="wait_for_frame">Trigger</button>
                <p></p>
            </div>
            <div class="col-sm-8 align-items-center">
                <p></p><iframe src="inner.html" style="display: none" id="frame" name="frm"></iframe>
            </div>
        </div>

        <br><br>
    </div>

    <br><br><br><br>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <script>
        // sleep for "ms" milliseconds
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms * 1000));
        };

        // generate random number between the min and max values
        function randomSeconds() {
            var min = parseInt($("#min_wait").val());
            var max = parseInt($("#max_wait").val());

            return (Math.floor(Math.random() * (max - min)) + min);
        };

        // Put trigger button in waiting state
        function setWaitState(trigger, ms) {
            var origTarget = trigger.html();

            trigger
                .html('<span class="spinner-border spinner-border-sm mr-2" role="status" aria-hidden="true"></span> Waiting (' + ms + 's)')
                .attr("disabled", true);

            return origTarget;
        }

        // finish the wait state of the trigger button
        function finishWaitState(trigger, origHTML) {
            trigger.html(origHTML).attr("disabled", false);
        }

        // All functions
        $(document).ready(function() {
            // Initialize the popover
            $('[data-toggle="popover"]').popover();

            // wait for element visible
            $("#visibility_trigger").click(async function() {
                var ms = randomSeconds();
                origTarget = setWaitState($(this), ms);
                console.log("wait = " + ms);
                await sleep(ms);

                $("#visibility_target").show();

                finishWaitState($(this), origTarget);
            });

            // wait for element invisible
            $("#invisibility_trigger").click(async function() {
                var ms = randomSeconds();
                origTarget = setWaitState($(this), ms);
                console.log("wait = " + ms);
                await sleep(ms);

                $("#invisibility_target").hide();
                $("#spinner_gone").show();

                finishWaitState($(this), origTarget);
            });

            // wait for element enabled
            $("#enabled_trigger").click(async function() {
                var ms = randomSeconds();
                origTarget = setWaitState($(this), ms);
                console.log("wait = " + ms);
                await sleep(ms);

                $("#enabled_target")
                    .attr("class", "btn btn-success")
                    .html("Enabled Button")
                    .attr("disabled", false);

                finishWaitState($(this), origTarget);
            });

            // wait for alert
            $("#alert_trigger").click(async function() {
                $("#confirm_cancelled").hide();
                $("#confirm_ok").hide();
                $("#alert_handled").hide();

                var ms = randomSeconds();
                origTarget = setWaitState($(this), ms);
                console.log("wait = " + ms);
                await sleep(ms);

                a = alert("I am alerting you!");
                $("#alert_handled").show();

                finishWaitState($(this), origTarget);
            });

            // wait for confirm
            $("#prompt_trigger").click(async function() {
                $("#confirm_cancelled").hide();
                $("#confirm_ok").hide();
                $("#alert_handled").hide();

                var ms = randomSeconds();
                origTarget = setWaitState($(this), ms);
                console.log("wait = " + ms);
                await sleep(ms);

                res = confirm("Choose wisely...\nIt's your life!");
                if (res) {
                    $("#confirm_ok").show();
                } else {
                    $("#confirm_cancelled").show();
                }

                finishWaitState($(this), origTarget);
            });

            // Wait for Page Title to change
            $("#page_title_trigger").click(async function() {
                var ms = randomSeconds();
                origTarget = setWaitState($(this), ms);
                console.log("wait = " + ms);
                await sleep(ms);

                $(document).attr("title", "My New Title!");

                finishWaitState($(this), origTarget);
            });

            // Wait for text/value to have specific values
            $("#text_value_trigger").click(async function() {
                var ms = randomSeconds();
                origTarget = setWaitState($(this), ms);
                console.log("wait = " + ms);
                await sleep(ms);

                $("#wait_for_value").val("Dennis Ritchie");
                $("#wait_for_text").html("Submit");

                finishWaitState($(this), origTarget);
            });
            
            // wait for element visible
            $("#wait_for_frame").click(async function() {
                var ms = randomSeconds();
                origTarget = setWaitState($(this), ms);
                console.log("wait = " + ms);
                await sleep(ms);

                $("#frame").show();

                finishWaitState($(this), origTarget);
            });
        });
    </script>
</body>

</html>